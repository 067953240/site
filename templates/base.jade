doctype 5
-load staticfiles
-load strings
-load variables
html(lang='en')
    head
        title
            block title
                | #{title} - Don Mills Online Judge
        meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
        if misc_config.meta_keywords
            meta(name='keywords', content=misc_config['meta_keywords'])
        link(rel='stylesheet', href='{% static "style.css" %}')
        link(rel='canonical', href='http://{{ site.domain }}{{ request.get_full_path }}')
        script(src='//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js')
        script(src='{% static "navbar.js" %}')
        if nav_tab
            style.
                nav ul li a.nav-#{nav_tab.key} {
                    color: #FFF;
                    background: #2980b9
                }
        if request.user.is_authenticated and IN_CONTEST
            script(type='text/javascript')
                $(document).ready(function () {
                        var label = $("#contest-time-remaining");
                        var today=new Date('0/0/0 ' + label.html)
                        function startTime() {
                            var h=today.getHours();
                            var m=today.getMinutes();
                            var s=today.getSeconds();
                            m = checkTime(m);
                            s = checkTime(s);
                            label.html = h+":"+m+":"+s;
                            var t = setTimeout(function(){
                            today -= 1000;
                            today = new Date(today);
                            startTime()
                            },1000);
                        }
                });
                function checkTime(i) {
                    if (i<10) {i = "0" + i}  // add zero in front of numbers < 10
                    return i;
                }
            style.
                #contest-info {
                    position:fixed;
                    padding-top:0px;
                    padding-bottom:3px;
                    padding-left:5px;
                    padding-right:5px;
                    right:10px;
                    top:30px;
                    font-size:2em;
                    color:white;
                    border:1px solid gray;
                    border-radius:4px;
                }
        block media
            body
        noscript This site works best with JavaScript enabled.
        #header.unselectable
            h1
                span(style='color: #FFDE05') DM::
                | OJ
            if request.user.is_authenticated and IN_CONTEST
                #contest-info #{CONTEST.contest.name} - 
                    #contest-time-remaining #{CONTEST.time_remaining|timedelta:"simple"}
        header#nav-head
            nav#navigation.unselectable
                ul
                    each item in nav_bar
                        li
                            a(href=item.path, class='nav-{{ item.key }}')= item.label
                span#user-links
                    if request.user.is_authenticated
                        a(href='{% url "judge.views.user" %}')
                            | Hello,&nbsp;
                            b #{request.user.username}
                        | &nbsp;|
                        if request.user.is_staff or request.user.profile.is_admin
                            a(href='{% url "admin:index" %}') admin
                            | &nbsp;|
                        a(href='{% url "django.contrib.auth.views.logout" %}?next=')
                            | &nbsp;log out
                    else
                        a(href='{% url "django.contrib.auth.views.login" %}?next={{ request.get_full_path|urlencode }}')
                            b Login
                        | &nbsp;|&nbsp;
                        a(href='/accounts/register/') Register
        br
        div#content
            h2(style='color:#393630; display:inline')
                block content_title
                    | #{title}
            block header
            hr
            br
            div#content-body
                block body
            footer
                p Generated on {% now "H:i:s, F d, Y O" %}
        block bodyend
                                                 
