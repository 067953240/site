extends base
-load staticfiles
-load gravatar

block media
    style
        a.edit-profile {
            float: right;
            padding-top: 1em;
        }
    script(type='text/javascript')
        $(function () {
            $('a.hide-group').click(function (event) {
                var ul = $(this).parents('div.user-problem-group').find('ul');
                if (ul.is(':visible')) {
                    ul.hide('slow', function () {
                        $(this).html('[Show]');
                    });
                } else {
                    ul.show('slow', function () {
                        $(this).html('[Hide]');
                    });
                }
                event.preventDefault();
            });
        });

block header
    if user.user == request.user
        a.edit-profile(href='{% url "judge.views.edit_profile" %}')
            | Edit profile

block body
    if user.name
        b #{user.name}
        br
        br
    if user.about
        h3 Self-description
        | #{user.about|linebreaks}
        br
        br
    h4 #{user.problems} problems solved.
    br
    b Total points:&nbsp;
    | #{user.calculate_points}
    br
    - regroup best_submissions by problem__group__full_name as problems
    each group in problems
        div.user-problem-group
            h3 #{group.grouper}
                a.hide-group(href='#') [Hide]
            ul
                each entry in group.list
                    li
                        a(href='{% url "judge.views.problem" entry.problem__code %}') #{entry.problem__name}&nbsp;
                        a(href='{% url "judge.views.user_submissions" entry.problem__code user.user.username %}')
                            | (#{entry.points} / #{entry.problem__points})
