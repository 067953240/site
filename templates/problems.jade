extends base
-load staticfiles

block media
    script(src='{% static "tablesorter.js" %}', type='text/javascript')
    script(type='text/javascript')
        $(document).ready(function () {
            $("#problem-table").tablesorter({
                sortList: [
                    [3, 0]
                ],
                textExtraction: function (node) {
                    node = $(node);
                    var text = node.text().replace(/^\s+|\s+$/g, '');
                    return (node.hasClass('p') ? text.replace(/p$/, '') : text);
                }
            });
        });
    style
        #problem-table .problem {
            width: 85%
        }

        #problem-table .category {
            width: 15%
        }

        #problem-table .code, .points, .users {
            white-space: nowrap
        }

        #problem-table tr:hover {
            background: #EAEAEA;
        }

        #problem-table tr:not(hover) {
        }

        #filter-form {
            vertical-align: top;
            margin-bottom: 0.5em;
        }

block body
    br
    if not IN_CONTEST
        form#filter-form(name='form', action='', method='get')
            if hide_solved
                input(type='checkbox', name='hide_solved', id='hide_solved', onclick='document.form.submit()', checked='checked')
            else
                input(type='checkbox', name='hide_solved', id='hide_solved', value='1', onclick='document.form.submit()')
            label(for='hide_solved') Hide solved problems
    table#problem-table.table.striped
        thead
            tr
                th.solved
                th.problem Problem
                th.category Category
                th.code Code
                th.points Points
                th.users Users
        tbody
            each problem in problems
                tr
                    td
                        if problem.id in completed_problem_ids
                            img(src='{% static "admin/img/icon-yes.gif" %}')
                        else                                                            
                            img(src='{% static "admin/img/icon-no.gif" %}')
                    td
                        a(href='{% url "judge.views.problem" problem.code %}')= problem.name
                    - cache 86400 problem_list_group problem.group_id
                        td= problem.group.full_name
                    td= problem.code
                    td.p= problem.points
                        if problem.partial
                            | p
                    td
                        a(href='{% url "judge.views.ranked_submissions" problem.code %}')= problem.number_of_users
